
pipeline {
    agent any

    stages {
        stage('Checkout GIT') {
            steps {
                echo 'Pulling'
               git branch: 'oussamabouguerra', credentialsId: 'cred', url: 'https://github.com/ibtchy/ProjetDevOps.git'
                
            }
        }
        stage('Maven Clean'){
            steps {
                sh 'mvn clean'
            }}
         stage('Maven Version'){
            steps {
                sh 'mvn -version'
            }
        }
        
        stage('Compile'){
            steps {
                sh 'mvn compile -e'
            }
        }
         
       stage('sonar')
       {
         steps{
         sh 'mvn sonar:sonar \
  -Dsonar.projectKey=ouss \
  -Dsonar.host.url=http://192.168.1.16:9000 \
  -Dsonar.login=b09bb14037a90ad1a004db60a00e66b4a7b8edab'
         }       
       }
           stage('JUNIT/MOCKITO')
       {
         steps{
         sh 'mvn test -Dtest="tn.esprit.spring.OperateurServiceTest.java"'
         }       
       }   
        
         stage('Nexus')
       {
         steps{
         sh 'mvn deploy -Dskiptests"'
         }       
       }   
        
        
    }
}
